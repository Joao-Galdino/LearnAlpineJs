<html>
    <head>
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    </head>
    <body>
        <h1>Ex12 Fetching Data from an API</h1>
        <b>Objective:</b> Display data fetched from an API upon a button click.
        <p> 
            <b>Instructions:</b>
            <ol>
                <li>Initialize a component with an empty array to hold fetched data.</li>
                <li>Use x-on:click to trigger data fetching from a predefined API URL with fetch inside a method.</li>
                <li>Display the fetched data in a list.</li>
            </ol>
        </p>
        <div x-data="{
                num: '',
                data: '', 
                ability: '', 
                imageUrl: '',
                fetchData: async function() {
                    const num = Math.floor(Math.random() * 151) + 1;
                    const response = await fetch('https://pokeapi.co/api/v2/pokemon/' + num);
                    const json = await response.json();
                    this.num = num;
                    this.data = json.name;
                    this.ability = json.abilities[0].ability.name; 
                    this.imageUrl = json.sprites.front_default;
                }
            }">
            <button x-on:click="fetchData()">Random Pokemon</button>
            <div>
                <h2 x-text="`#${num} ${data}`"></h2>
                <h3 x-text="'Ability: ' + ability"></h3>
                <img x-bind:src="imageUrl" alt="Pokemon Image" /></br>
            </div>
        </div>
    </body>
</html>
